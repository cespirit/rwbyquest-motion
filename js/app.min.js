/* Updated 2015-04-18 */
var animations={fadeIn:function(a){console.log("fadeIn() function called");var b,c,d;return b=$.Deferred(),c=b.then(function(){return console.log("	fadeIn: hide()"),a.hide()}),d=c.then(function(){return console.log("	fadeIn: fadeIn()"),a.fadeIn(3e3)}),b.resolve(),d}},content={pages:[{pageType:"instructions",instructions:"<h2>COMMAND RUSH</h2><p>For the duration of this encounter you may directly command <span class='keyword'>any</span> party member.</p>",animation:animations.fadeIn},{pageType:"command",command:"<p><span class='keyword'>Everyone</span>: Put as much distance between you and the window. Maybe head for the hall if possible.</p>",animation:animations.fadeIn},{pageType:"image",src:"images/3.png",animation:animations.fadeIn},{pageType:"image",src:"images/4.png",animation:animations.fadeIn},{pageType:"credits"}]};$(document).ready(function(){var a,b,c=!1,d=!0,e=-1,f=$("#page"),g=content.pages.length-1,h=function(){if(a=content.pages[e],!a)return void console.log("Error in updatePage() at page number: "+e);if(b=a.pageType)switch(b){case"instructions":console.log("Instructions page, pageNum: "+e),f.html("<div class='instructions'>"+a.instructions+"</div>"),f.data("pageNum",e),$.when(a.animation(f)).then(function(){d?j():(f.stop(!0,!1),f.show())});break;case"command":console.log("Command page, pageNum: "+e),f.html("<div class='command'>"+a.command+"</div>"),f.data("pageNum",e),$.when(a.animation(f)).then(function(){d?j():(f.stop(!0,!1),f.show())});break;case"image":console.log("Image page, pageNum: "+e),f.html("<div><img class='panel-img' alt='' src='"+a.src+"'/></div>"),f.data("pageNum",e),$.when(a.animation(f)).then(function(){d?j():(f.stop(!0,!1),f.show())});break;case"credits":console.log("Credits page, pageNum: "+e),$("#page").html(""),$("#togglePlay").find("i").removeClass("fa-pause"),$("#togglePlay").find("i").addClass("fa-play"),$("#credits").css("display","block");break;default:console.log("Error in updatePage(). Page type is not valid for page: "+e)}},i=function(){console.log("Clicked PREV"),e===g&&$("#credits").css("display","none"),e--,0>e?++e:h()},j=function(){console.log("Clicked NEXT"),e++,e>g?--e:h()},k=function(){var a=$(this).find("i"),b=a.hasClass("fa-play");b&&e!=g?(d=!0,a.removeClass("fa-play"),a.addClass("fa-pause"),j(),console.log("Pressed to PLAY, pageNum: ",e)):b||(d=!1,a.removeClass("fa-pause"),a.addClass("fa-play"),console.log("Pressed to PAUSE, pageNum: ",e))};$("#btnStart").click(function(){console.log("Clicked START"),$("#titleScreen").css("display","none"),$("#controls").css("display","block"),f.css("display","block"),c=!0,j()}),$("#togglePlay").click(k),$("#prev").on("click",function(){d=!1;var a=$("#togglePlay").find("i");a.removeClass("fa-pause"),a.addClass("fa-play"),i()}),$("#next").on("click",function(){d=!1;var a=$("#togglePlay").find("i");a.removeClass("fa-pause"),a.addClass("fa-play"),j()}),$("#page").on("click",function(){d=!1;var a=$("#togglePlay").find("i");a.removeClass("fa-pause"),a.addClass("fa-play"),j()}),$("body").keyup(function(a){if(c)if(37===a.which){d=!1;var b=$("#togglePlay").find("i");b.removeClass("fa-pause"),b.addClass("fa-play"),i()}else if(39===a.which){d=!1;var b=$("#togglePlay").find("i");b.removeClass("fa-pause"),b.addClass("fa-play"),j()}})});